!function(t){var e={};function s(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(i,n,function(e){return t[e]}.bind(null,n));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e,s){},function(t,e,s){"use strict";s.r(e);s(0);var i=class{constructor(){this.goRight=()=>{this.currentIndex<this.images.length-1?(clearInterval(this.intervalles),this.previousIndex=this.currentIndex,this.currentIndex++,this.images[this.currentIndex].classList.add("show"),this.images[this.previousIndex].classList.remove("show")):(clearInterval(this.intervalles),this.previousIndex=this.currentIndex,this.currentIndex=0,this.images[this.currentIndex].classList.add("show"),this.images[this.previousIndex].classList.remove("show"),clearInterval(this.intervalles)),this.intervalles=setInterval(this.goRight,3e3)},this.goLeft=()=>{0===this.currentIndex?(clearInterval(this.intervalles),this.previousIndex=this.currentIndex,this.currentIndex=this.images.length-1,this.images[this.currentIndex].classList.add("show"),this.images[this.previousIndex].classList.remove("show")):(clearInterval(this.intervalles),this.previousIndex=this.currentIndex,this.currentIndex--,this.images[this.currentIndex].classList.add("show"),this.images[this.previousIndex].classList.remove("show")),this.intervalles=setInterval(this.goRight,3e3)},this.putPauseOrPlay=()=>{!0===this.click?(clearInterval(this.intervalles),this.click=!1,this.pauseButton.style.display="none",this.playButton.style.display="block"):(this.click=!0,this.pauseButton.style.display="block",this.playButton.style.display="none",this.intervalles=setInterval(this.goRight,3e3))},this.container=document.getElementById("carrousel"),this.images=document.querySelectorAll(".carrousel__content"),this.rightButton=document.getElementById("js-carrousel__buttons-right"),this.leftButton=document.getElementById("js-carrousel__buttons-left"),this.pauseButton=document.getElementById("js-carrousel__buttons-pause"),this.playButton=document.getElementById("js-carrousel__buttons-play"),this.currentIndex=0,this.previousIndex=0,this.click=!0,this.intervalles=setInterval(this.goRight,3e3),this.rightButton.addEventListener("click",this.goRight),this.leftButton.addEventListener("click",this.goLeft),this.pauseButton.addEventListener("click",this.putPauseOrPlay),this.playButton.addEventListener("click",this.putPauseOrPlay)}};var n=class{constructor(){this.initMap=()=>{this.map=L.map(this.mapContainer).setView([45.75,4.85],15);let t=L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{minZoom:13,maxZoom:17,attribution:'&copy; <a href="https://openstreetmap.org/copyright">OpenStreetMap contributors</a>'});this.map.addLayer(t)},this.getDataFromApi=()=>new Promise((t,e)=>{let s=new XMLHttpRequest;s.onreadystatechange=()=>{if(4===s.readyState)if(200===s.status){let e=JSON.parse(s.responseText);t(e)}else e("Erreur")},s.open("GET",this.api),s.send()}),this.addMarkers=t=>{t.forEach(t=>{L.marker([t.position.lat,t.position.lng]).addTo(this.map).addEventListener("click",()=>{this.currentStation=t,""!=t.address?this.address.innerHTML=t.address.charAt(0).toUpperCase()+t.address.substring(1).toLowerCase():(this.address.innerHTML="Adresse non reconnue",this.bikesNumber.style.color="#F20746",this.bikesNumber.innerHTML=0),this.bikesNumber.innerHTML=t.available_bikes,t.available_bikes>0?(this.address.style.color="#20284F",this.bikesNumber.style.color="#20284F"):(this.address.style.color="#8D8D8D",this.bikesNumber.style.color="#F20746")})})},this.api="https://api.jcdecaux.com/vls/v1/stations?contract=Lyon&apiKey=6dd524dd35fde93005f7e4806b82374aedc7864f",this.mapContainer=document.getElementById("js-map"),this.map=null,this.address=document.getElementById("js-reservation__address"),this.bikesNumber=document.getElementById("js-reservation__illustrations-number"),this.currentStation=null,this.initMap(),this.getDataFromApi().then(t=>{this.addMarkers(t)})}};var r=class{constructor(){this.evenements=()=>{this.canvas.addEventListener("mousedown",t=>{console.log("yo"),this.signatureOk=!0,this.dernierePosition=this.recupPositionSouris(t)}),this.canvas.addEventListener("mousemove",t=>{this.positionSouris=this.recupPositionSouris(t),this.signatureCanvas()}),document.addEventListener("mouseup",t=>{this.signatureOk=!1})},this.canvas=document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.validationButton=document.getElementById("validation"),this.signatureOk=!1,this.positionSouris={x:0,y:0},this.dernierePosition=this.positionSouris,this.evenements()}recupPositionSouris(t){if(this.signatureOk){let e=this.canvas.getBoundingClientRect();return{x:t.clientX-e.left,y:t.clientY-e.top}}}signatureCanvas(){this.signatureOk&&(this.context.beginPath(),this.context.moveTo(this.dernierePosition.x,this.dernierePosition.y),this.context.lineTo(this.positionSouris.x,this.positionSouris.y),this.context.stroke(),this.context.strokeStyle="#a1e8cd",this.context.lineWidth=3,this.dernierePosition=this.positionSouris)}};var o=class{constructor(){this.checkRegExInput=(t,e)=>{0==t.value.length?(t.style.borderBottom="1px solid #CACACA",this.checkStateInput(!1,e)):!this.regex.test(t.value)||t.value.length<=1?(t.style.borderBottom="1px solid #F20746",t.style.color="#F20746",this.checkStateInput(!1,e)):(t.style.borderBottom="1px solid #56CCCE",t.style.color="#56CCCE",this.checkStateInput(!0,e),localStorage.setItem(e,t.value)),this.activateButtonReservation()},this.checkStateInput=(t,e)=>{"prenomUser"===e?this.correctName=t:"nomUser"===e&&(this.correctSurname=t)},this.activateButtonReservation=()=>{1==this.correctName&&1==this.correctSurname&&1==this.bikeAvailable?(this.reservationButton.disabled=!1,this.reservationButton.style.backgroundColor="#56CCCE"):(this.reservationButton.disabled=!0,this.reservationButton.style.backgroundColor="#CACACA")},this.afficherCanvas=()=>{this.popIn.style.display="flex";new r},this.map=document.getElementById("js-map"),this.address=document.getElementById("js-reservation__address"),this.bikesNumber=document.getElementById("js-reservation__illustrations-number"),this.inputSurname=document.getElementById("form__surname-input"),this.inputName=document.getElementById("form__name-input"),this.reservationButton=document.getElementById("js-form__submit"),this.correctSurname=null,this.correctName=null,this.bikeAvailable=null,this.regex=/^[A-Za-zàäâéèëêïîôùüÿçœ\'-]+$/,this.popIn=document.getElementById("popin"),this.validationButton=document.getElementById("validation"),this.maMap=new n,this.reservationButton.disabled=!0,this.inputSurname.addEventListener("input",()=>{this.checkRegExInput(this.inputSurname,"nomUser")}),this.inputName.addEventListener("input",()=>{this.checkRegExInput(this.inputName,"prenomUser")}),this.map.addEventListener("click",()=>{this.maMap.currentStation&&(this.maMap.currentStation.available_bikes?(this.bikeAvailable=!0,this.activateButtonReservation()):(this.bikeAvailable=!1,this.activateButtonReservation()))}),this.reservationButton.addEventListener("click",t=>{t.preventDefault(),this.afficherCanvas()}),this.validationButton.addEventListener("click",t=>{t.preventDefault(),this.popIn.style.display="none"})}};new i,new o}]);